/*! SlimModal 11-05-2015 */
!function(a,b){"use strict";function c(a){var b=$(this),c=$.extend(d.DEFAULTS,b.data()),e=b.data("slimModal.data");return!e&&b.data("slimModal.data",e=new d(b,c)),"string"==typeof a&&e[a](),this}var d=function(a,b){this.$element=a,this.options=$.extend(this.constructor.DEFAULTS,b),this.$maskLayer=null,this.isLocked=null};d.VERSION="1.0.0",d.DEFAULTS={overlay:!0,keyboard:!0,modal:!0,load:!1,ajax:!1},d.EVENTS={BEFORE_SHOW:"slimModal.before.show",AFTER_SHOW:"slimModal.after.show",BEFORE_HIDE:"slimModal.before.hide",AFTER_HIDE:"slimModal.after.hide"},d.ESCAPE_KEY=27,d.ANIMATION_SPEED=250,d.prototype.toggle=function(){this.isLocked?this.hide():this.show()},d.prototype.show=function(){this.isLocked=!0,this.addMaskLayer(),this.addCloseButton(),this.keyboardBindings(),this.overlayBindings(),this.closeButtonBindings(),this.showAnimation()},d.prototype.hide=function(a){return this.isLocked=!1,this.hideAnimation(),!1},d.prototype.showAnimation=function(){this.$element.trigger(this.constructor.EVENTS.BEFORE_SHOW),this.$element.css("top",this.resetTop()+"px"),this.$maskLayer.show().stop().animate({opacity:1},this.constructor.ANIMATION_SPEED,$.proxy(function(){this.$element.show().stop().animate({top:this.offsetTop()+"px",opacity:1},this.constructor.ANIMATION_SPEED).trigger(this.constructor.EVENTS.AFTER_SHOW)},this))},d.prototype.hideAnimation=function(){this.$element.trigger(this.constructor.EVENTS.BEFORE_HIDE),this.$element.stop().animate({top:this.resetTop()+"px",opacity:0},this.constructor.ANIMATION_SPEED,$.proxy(function(){this.$maskLayer.stop().animate({opacity:0},this.constructor.ANIMATION_SPEED,$.proxy(function(){this.$maskLayer.hide().remove(),this.$element.trigger(this.constructor.EVENTS.AFTER_HIDE).hide()},this))},this))},d.prototype.offsetTop=function(){return parseInt($(window).scrollTop()+45,10)},d.prototype.resetTop=function(){return parseInt($(window).scrollTop()-this.$element.outerHeight(),10)},d.prototype.addMaskLayer=function(){this.$maskLayer=$("<div/>",{"class":"slimModal-Overlay"}),$("body").append(this.$maskLayer)},d.prototype.addCloseButton=function(){var a=this.$element.find('[data-js="close_modal_button"]').length;if(this.options.modal&&a){var b='<div class="SlimModal-close"><a href="#" class="SlimModal-close-link" data-js="close_modal_button"><i class="SlimModal-close-icon sb-Icon--times"></i></a></div>';this.$element.prepend(b)}},d.prototype.keyboardBindings=function(){this.isLocked&&this.options.keyboard&&$(document).one("keyup",$.proxy(function(a){a.which===d.ESCAPE_KEY&&this.hide(),a.which===d.ESCAPE_KEY&&console.log("Hello World")},this))},d.prototype.overlayBindings=function(){this.isLocked&&this.options.overlay&&this.$maskLayer.one("click.overlay.close.slimModal",$.proxy(this.hide,this))},d.prototype.closeButtonBindings=function(){this.isLocked&&this.options.modal&&this.$element.one("click.button.close.slimModal",'[data-js="close_modal_button"]',$.proxy(this.hide,this))},$.fn.slimModal=c,$(document).on("click.show.slimModal",'[data-js="slimModal-trigger"]',function(a){var b=$(this);b.is("a")&&a.preventDefault();var c=$("[data-modal="+b.attr("data-target")+"]"),e=c.data("slimModal.data"),f=c.data();e||c.data("slimModal.data",e=new d(c,f)),e.toggle()}),$('[data-js="slimModal-target"][data-load="true"]').each(function(){var a=$(this),b=$.extend(d.DEFAULTS,a.data()),c=new d(a,b);a.data("slimModal.data",c),c.toggle()})}(this);